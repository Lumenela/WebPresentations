<<<<<<< HEAD

=======
// Generated by CoffeeScript 1.3.3
>>>>>>> 70019ad6cebd2e9b9c2853cba260c0dda4297cde
/*
@author Tantaman
*/

<<<<<<< HEAD

(function() {

  define(["./Component", "common/FileUtils"], function(Component, FileUtils) {
    return Component.extend({
      initialize: function() {
        var src;
        Component.prototype.initialize.apply(this, arguments);
        this.set("type", "ImageModel");
        src = this.get("src");
        this.set("imageType", FileUtils.imageType(src));
        this.on("change:src", this._updateCache, this);
        this.cachedImage = new Image();
        return this._updateCache();
      },
      _updateCache: function() {
        return this.cachedImage.src = this.get("src");
      },
      toBase64: function() {},
      constructor: function ImageModel() {
			Component.prototype.constructor.apply(this, arguments);
		}
    });
  });

}).call(this);
=======
define(["./Component"], function(Component) {
  return Component.extend({
    initialize: function() {
      var extension, idx, src;
      Component.prototype.initialize.apply(this, arguments);
      this.set("type", "ImageModel");
      src = this.get("src");
      idx = src.lastIndexOf(".");
      if (idx !== -1 && idx + 1 < src.length) {
        extension = src.substring(idx + 1, src.length);
        idx = extension.lastIndexOf("?");
        if (idx !== -1) {
          extension = extension.substring(0, idx);
        }
      }
      this.set("imageType", extension.toUpperCase());
      this.on("change:src", this._updateCache, this);
      this.cachedImage = new Image();
      return this._updateCache();
    },
    _updateCache: function() {
      return this.cachedImage.src = this.get("src");
    },
    toBase64: function() {},
    constructor: function ImageModel() {
			Component.prototype.constructor.apply(this, arguments);
		}
  });
});
>>>>>>> 70019ad6cebd2e9b9c2853cba260c0dda4297cde
